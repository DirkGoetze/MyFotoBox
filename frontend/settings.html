<!-- 
-------------------------------------------------------------------------
    settings.html
-------------------------------------------------------------------------
 Funktion: Einstellungsseite f√ºr die Fotobox-Konfiguration.
 Passwortgesch√ºtzt, erlaubt Anpassung aller System- und Anzeigeeinstellungen.
------------------------------------------------------------------------- 
//-->
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Cache-Control-Header f√ºr die Testphase -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Fotobox Einstellungen</title>
    <!-- Favicon-Definition, um 404-Fehler zu vermeiden -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üì∑</text></svg>">
    <link rel="stylesheet" href="fonts/fontawesome-free-5.15.4-web/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/menu.css">
    <link rel="stylesheet" href="css/config.css">
    <link rel="stylesheet" href="css/settings.css">
</head>
<body>
    <!-- header-block //-->
    <header id="mainHeader">
        <div class="header-left">
            <button id="hamburgerBtn">‚ò∞</button>
        </div>
        <a id="headerTitleLink" href="capture.html">
            <span id="headerTitle" class="header-title">Fotobox</span>
        </a>
        <div class="header-date-time">
            <span id="headerTime"></span>
            <span id="headerDate"></span>
        </div>
    </header>
    <!-- Men√º-Overlay au√üerhalb des Headers -->
    <div id="menuOverlay">
        <!-- Men√ºpunkte werden per JavaScript hinzugef√ºgt -->
    </div>
    <!-- main-block //-->
    <main>        <!-- Benachrichtigungen werden dynamisch eingef√ºgt -->
        
        <nav class="breadcrumb">
            <a href="capture.html" class="home-icon"><i class="fas fa-home"></i></a> &gt; <span>Einstellungen</span>
        </nav>
        
        <form id="loginForm">
            <div class="fieldset-container">
                <div class="input-field">
                    <label for="adminPassword">Passwort f√ºr Einstellungen</label>
                    <input type="password" id="adminPassword" required>
                    <details>
                        <summary>Passwort-Hinweis</summary>
                        <div>Geben Sie das Admin-Passwort ein, um Zugang zu den Einstellungen zu erhalten. Das Standardpasswort ist in der Dokumentation zu finden.</div>
                    </details>
                </div>
                <div style="margin-top: 1.5em;">
                    <button type="submit">Login</button>
                    <span id="loginStatus"></span>
                </div>
            </div>
        </form>
          <form id="configForm" onsubmit="return false;">            <fieldset>
                <legend>Darstellung</legend>
                <div class="fieldset-container">                    <div class="input-field">
                        <label for="color_mode">Anzeigemodus</label>
                        <select name="color_mode" id="color_mode">
                            <option value="system">Systemabh√§ngig</option>
                            <option value="light">Hell</option>
                            <option value="dark">Dunkel</option>
                        </select>
                        <details>
                            <summary>√úber den Anzeigemodus</summary>
                            <div>Design der Benutzeroberfl√§che. Bei "Systemabh√§ngig" passt sich die Anzeige automatisch an die Ger√§teeinstellungen an. Dies ist besonders hilfreich, wenn die Fotobox sowohl tags√ºber als auch abends genutzt wird.</div>
                        </details>
                    </div>
                      <div class="input-field">
                        <label for="screensaver_timeout">Bildschirmschoner nach</label>
                        <div class="input-with-unit">
                            <input type="number" name="screensaver_timeout" id="screensaver_timeout" min="30" max="600" value="120">
                            <span class="unit">Sekunden</span>
                        </div>
                        <details>
                            <summary>Bildschirmschoner-Details</summary>
                            <div>Zeit der Inaktivit√§t, nach der der Bildschirmschoner aktiviert wird. Ein k√ºrzerer Wert schont den Bildschirm, ein l√§ngerer Wert ist f√ºr Veranstaltungen mit vielen Zuschauern besser geeignet.</div>
                        </details>
                    </div>
                    
                    <div class="input-field">
                        <label for="gallery_timeout">Galerie verlassen nach</label>
                        <div class="input-with-unit">
                            <input type="number" name="gallery_timeout" id="gallery_timeout" min="30" max="300" value="60">
                            <span class="unit">Sekunden</span>
                        </div>
                        <details>
                            <summary>Galerie-Timeout-Details</summary>
                            <div>Zeit der Inaktivit√§t in der Galerie-Ansicht, nach der automatisch zur Startseite zur√ºckgekehrt wird. Dies stellt sicher, dass die Fotobox nach der Betrachtung von Fotos wieder f√ºr neue Aufnahmen bereit ist.</div>
                        </details>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Eventeinstellungen</legend>
                <div class="fieldset-container">
                    <div class="input-field">
                        <label for="event_name">Event-Name</label>
                        <input type="text" name="event_name" id="event_name">
                        <details>
                            <summary>√úber den Event-Namen</summary>
                            <div>Name der Veranstaltung, wird auf allen Seiten angezeigt und im Header der Fotobox prominent dargestellt. Beispiele: "Hochzeit Anna & Tom", "Firmenfeier 2025".</div>
                        </details>
                    </div>
                    
                    <div class="input-field">
                        <label for="event_date">Event-Datum</label>
                        <input type="date" name="event_date" id="event_date">
                        <details>
                            <summary>√úber das Event-Datum</summary>
                            <div>Datum der Veranstaltung f√ºr die Anzeige. Dieses Datum erscheint im Fu√übereich und wird f√ºr die Sortierung von Bildern verwendet.</div>
                        </details>
                    </div>
                </div>
            </fieldset>            <fieldset>
                <legend>Kamera-Einstellungen</legend>
                <div class="fieldset-container">
                    <div class="input-field">
                        <label for="camera_config_id">Kamera-Konfiguration</label>
                        <select name="camera_config_id" id="camera_config_id">
                            <option value="system">Standardkonfiguration verwenden</option>
                            <!-- Wird per JavaScript mit verf√ºgbaren Kamera-Konfigurationen gef√ºllt -->
                        </select>
                        <details>
                            <summary>Konfigurationshinweise</summary>
                            <div>W√§hlen Sie eine vordefinierte Kamera-Konfiguration aus. Die Konfigurationen enthalten optimierte Einstellungen f√ºr verschiedene Kameratypen und Einsatzzwecke.</div>
                        </details>
                    </div>
                    
                    <!-- Kamera-Vorschau -->
                    <div class="camera-preview-container">
                        <label>Kamera-Vorschau</label>
                        <div id="cameraPreviewSettings" class="camera-preview-frame">
                            Keine Vorschau verf√ºgbar
                        </div>
                        <div class="preview-actions">
                            <button type="button" id="refreshPreviewBtn" class="small-btn">
                                <i class="fas fa-sync"></i> Aktualisieren
                            </button>
                            <button type="button" id="testCaptureBtn" class="small-btn">
                                <i class="fas fa-camera"></i> Testbild
                            </button>
                        </div>
                    </div>
                    
                    <!-- Dynamische Kamera-Einstellungen -->
                    <div id="dynamicCameraSettings" class="dynamic-settings">
                        <!-- Diese Einstellungen werden dynamisch je nach Kamera-Konfiguration generiert -->
                    </div>
                
                    <!-- Standard-Kameraeinstellungen -->
                    <div class="input-field">
                        <label for="flash_mode">Blitzlicht</label>
                        <select name="flash_mode" id="flash_mode">
                            <option value="system">Automatisch</option>
                            <option value="on">Immer an</option>
                            <option value="off">Immer aus</option>
                        </select>
                        <details>
                            <summary>Blitzlicht-Einstellungen</summary>
                            <div>Steuerung des Kamerablitzes (falls vorhanden). Bei "Automatisch" entscheidet die Kamera selbst je nach Lichtverh√§ltnissen. Bei Veranstaltungen mit empfindlichen G√§sten oder Kindern kann es sinnvoll sein, das Blitzlicht auszuschalten.</div>
                        </details>
                    </div>
                    
                    <div class="input-field">
                        <label for="countdown_duration">Anzeigedauer Countdown</label>
                        <div class="input-with-unit">
                            <input type="number" name="countdown_duration" id="countdown_duration" min="1" max="10" value="3">
                            <span class="unit">Sekunden</span>
                        </div>
                        <details>
                            <summary>Countdown-Details</summary>
                            <div>Zeitdauer bis zur Aufnahme eines Fotos. Ein l√§ngerer Countdown gibt den G√§sten mehr Zeit, sich vor der Kamera zu positionieren. Bei kleinen Kindern empfiehlt sich ein k√ºrzerer Countdown (1-2 Sekunden).</div>
                        </details>
                    </div>
                    
                    <!-- Urspr√ºngliches Kamera-Auswahl-Dropdown (versteckt aber erhalten f√ºr Kompatibilit√§t) -->
                    <div class="input-field" style="display:none;">
                        <label for="camera_id">Kamera-Auswahl</label>
                        <select name="camera_id" id="camera_id">
                            <option value="system">Systemstandard verwenden</option>
                            <!-- Wird per JavaScript mit verf√ºgbaren Kameras gef√ºllt -->
                        </select>
                    </div>
                </div>
            </fieldset><fieldset id="systemUpdateSection">
                <legend>System-Updates</legend>
                <div class="fieldset-container">
                    <div id="versionInfo" class="version-info">
                        <div class="version-status">
                            <div id="versionDisplay">
                                <span id="currentVersion">Lokale Version: <span class="version-number">-</span></span>
                                <span id="versionStatusText">/ Suche nach Updates</span>
                            </div>
                            <button type="button" id="checkUpdateBtn" class="secondary-btn" disabled>Auf Updates pr√ºfen</button>
                        </div>
                        <div id="updateStatus" class="update-status hidden"></div>
                    </div>
                    <div id="dependenciesStatus" class="dependencies-status hidden">
                        <div class="dependencies-header">
                            <span class="dependencies-title">Abh√§ngigkeiten</span>
                            <span id="dependenciesStatusBadge" class="status-badge">Pr√ºfe...</span>
                        </div>
                        <div id="dependenciesList" class="dependencies-list hidden">
                            <div id="systemDependencies" class="dependency-group">
                                <h4>System-Pakete</h4>
                                <ul id="systemDependenciesList"></ul>
                            </div>
                            <div id="pythonDependencies" class="dependency-group">
                                <h4>Python-Module</h4>
                                <ul id="pythonDependenciesList"></ul>
                            </div>
                        </div>
                        <button type="button" id="fixDependenciesBtn" class="secondary-btn hidden">Abh√§ngigkeiten installieren</button>
                    </div>
                    <div id="updateActions" class="update-actions hidden">
                        <div class="update-available-info">
                            <span class="update-badge">Update verf√ºgbar</span>
                            <span id="availableVersion">Online verf√ºgbar <span class="version-number">-</span></span>
                        </div>
                        <button type="button" id="installUpdateBtn" class="primary-btn">Update installieren</button>
                    </div>
                    <div id="updateProgress" class="update-progress hidden">
                        <div class="progress-bar">
                            <div id="updateProgressBar" class="progress-fill"></div>
                        </div>
                        <div id="updateProgressText" class="progress-text">Update wird vorbereitet...</div>
                    </div>
                </div>
            </fieldset>
              <fieldset>
                <legend>Admin-Einstellungen</legend>
                <div class="fieldset-container">
                    <div class="input-field">
                        <label for="new_password">Admin-Passwort √§ndern</label>
                        <input type="password" name="new_password" id="new_password">
                    </div>
                    <div class="input-field">
                        <label for="confirm_password">Passwort best√§tigen</label>
                        <input type="password" name="confirm_password" id="confirm_password">
                        <details>
                            <summary>Wichtige Passwort-Hinweise</summary>
                            <div>
                                <p>Mindestens 4 Zeichen. Leer lassen f√ºr keine √Ñnderung.</p>
                                <p>Das Passwort sch√ºtzt den Zugriff auf alle Systemeinstellungen. Bitte w√§hlen Sie ein sicheres Passwort und notieren Sie es an einem sicheren Ort.</p>
                                <p>Falls Sie das Passwort vergessen, finden Sie Anweisungen zum Zur√ºcksetzen in der Dokumentation.</p>
                            </div>
                        </details>
                    </div>
                    <div id="password-match-status"></div>
                </div>
            </fieldset>
        </form>
    </main>
    
    <footer id="mainFooter">
        <span id="footerText">¬© 2025 Fotobox</span>
    </footer>
      <!-- JavaScript wurde in externe Datei ausgelagert gem√§√ü Code-Formatierungs-Policy -->
    <script src="js/main.js"></script>
    <script type="module" src="js/live-settings-update.js"></script>
    <script type="module" src="js/settings.js"></script>

</body>
</html>
